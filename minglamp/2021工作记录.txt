.LOG
https://docs.qq.com/sheet/DUEpwZ3VYbExabHp1?tab=dn5l8o
与洋哥确认6.8、6.11  周二周五这两天讲述内容、讲述侧重点



18:55 2021/6/8
研发中心-》数据源配置：初次联通通过后，修改driver可以保存，
数据源管理-》数据表接入-》新增目标表-》字段长度设置称负值，点击保存，只提示建表失败，提示信息不完整。
数据源管理-》任务名称生成规则，仅支持三级名称拼接，非三级结构均提示规则输入格式不正确
文件接入-》新增-》填写信息完成后，点击文件预览，返回，再次选择数据库和 新增目标表的数据库是下拉框显示为空。***********************
前置步骤
1、点击数据源管理-》文件接入
2、填写基本信息

复现步骤：
1、填写抽取文件配置，选择数据类型，选择数据库
2、点击新增目标表按钮，选择数据库
3、点击基本信息内文件预览——》返回
4、选择抽取文件配置数据类型，选择数据库
5、点击新增目标表按钮，选择数据库

预期结果：
1、显示正常，下拉框内可以看到待选数据库列表
2、显示正常，下拉框内可以看到待选数据库列表
3、正常预览，返回
4、显示正常，下拉框内可以看到待选数据库列表
5、显示正常，下拉框内可以看到待选数据库列表
实际结果：
1、显示正常，下拉框内可以看到待选数据库列表
2、显示正常，下拉框内可以看到待选数据库列表
3、正常预览，返回
4、显示异常，下拉框内待选数据库列表为空，显示暂无数据
5、显示异常，下拉框内待选数据库列表为空，显示暂无数据
*******************************************************************************************************************

继续学习灵台方寸山产品培训课程。
9:11 2021/6/7
ftp和sftp的功能区别

功能需要实操：重点：文件上传，token管理（token过期这块，冷加载？看测试用例学习。）
token鉴权相关：MD5、授权码、token等

逐个功能看测试用例：
一些点：
api接入的token管理用例需要重点看。


华哥：问了两次还是三次，某某功能是为了解决什么问题。
介绍功能要先介绍背景，功能是为了解决什么样的问题。

晶姐经验：
想为什么会有需求，场景是什么，产品定位是什么，功能是怎么来的，基于怎样的考虑来的。
先测基础功能，然后测实现的细节
再深入学习底层的数据流转过程。
尝试花流程图。

洋哥: 多关注底层，功能熟悉后要去研究功能对应的数据表相关的内容。

总结：先和项目组人员，尤其是华哥、晶姐去确认工作重点，避免闭门造车，方向错误。
使用xmind 需要有重点，全部平铺效果一般。

尝试整理cdp标准产品全局 功能说明。
10:44 2021/6/9


18:45 2021/6/9
数据表中的dt是什么意思 
ftp和sftp的 在系统内有什么区别
token管理（token过期这块，冷加载？看测试用例学习。）
API接入——》接口测试-》调用参数 参数类型为嵌套参数是什么意思，如何使用
API接入-》接口测试-》数据节点字段 场景，功能使用。


数据源接入-》文件上传-》新增——》不填写内容直接点击确定，无反应



9:51 2021/6/10

10:43 2021/6/11
1、梳理学习CDP标准产品数据源接入模块：数据表接入、文件接入、文件上传、APi接入业务逻辑和系统功能
2、根据测试用例在CDP系统实操，发现并提交实操过程中遇到的bug
3、汇报交流数据源介入模块业务功能
4、完成麻辣烫社区新人课程学习与课后测评考试，学习麻辣烫社区必修课程

下周计划：
1、根据测试用例梳理任务监控模块功能，并整理功能文档 
2、与上级领导确认试用期考核目标
3、学习麻辣烫社区必修课程
4、完成领导交办的其他工作

心得：
作为测试人员，做汇报介绍功能要先介绍业务背景，介绍清楚功能是为了解决什么样的问题，再逐步介绍细节。
提交的bug被解决后在验证时，不仅要验证bug功能点，还要验证bug所在模块其他功能是否完整。
把测试工作做好应从以下几点逐步介入
1、为什么会有需求，场景是什么，产品定位是什么，功能是怎么来的，基于怎样的考虑来的
2、测基础功能，然后测实现的细节
3、深入学习底层的数据流转过程。


反思：
做测试工作，在没有清晰的计划时先和相关同事确认工作重点，避免闭门造车，方向错误。
有些功能是隐藏逻辑，要多和项目组同事沟通

16:54 2021/6/11
学习docker driver接口配置
实操API接入、重点关注接口测试配置的一些逻辑
制定后续系统熟悉计，任务监控，汇报时间等
和晶姐学习测试该怎么熟悉系统，怎么整理汇报
跟高兴回归intel
17:52 2021/6/11


17:57 2021/6/11

10:49 2021/6/15
任务监控-数据介入任务、ETL抽取等，视图数据来源，试图数据取值区间，

和晶姐沟通试用期考核目标，关于测试技能方面的一些心得记录：
1、对系统要足够熟悉，闭上眼要能够说出系统有那些模块，每个模块下的子功能是什么。模块、子功能是用来干嘛的
2、测试用例的设计 尽量是正一反四的设计思路
3、推动BUG分级管理
4、熟悉系统功能关联关系。


周三工作计划：
Intel回归测试-》数据源管理模块。
19:20 2021/6/15


数据管理模块问题： SuperID 意义，为什么要用ETL抽一下，流程，是什么样的，分层讲解：DWD superID ,行为、属性、中间表。
需要确认每个流程产生的文件地址、和对应的数据库表名
10:37 2021/6/16
***************************************************克震讲述ETL，SuperID后台数据流程******************************************************************
ETL 流程：
dt=2021-06-14
数据流转：Hive ods 分区表==========>  GP dwd

文件，库表，API，SFTP ===> Hive ODS ======> 抽取Json （库名，表名，日期）=====> 服务器本地文件  ======> 推送到Kafka ======> ETLFlink 消费kafka ====> 根据Groovy 脚本确定存储到Gp的库表 =====> Greenplum 数据库
Flink消费的时候 去Redis查看是否有这个ID，如果有就填充上，如果没有就生成一个
表中是否填充superid由groovy脚本控制


Superid 流程：
前置条件
1.Superid配置页面配置待抽取的Superid
文件，库表，API，SFTP ===> Hive ODS ===> 根据Mysql中Superid-meta-v 的信息抽取相应的列信息 =======> 服务器本地json文件 =======> 推送到Kafka ======> Flink 消费kafka ======> 和Redis 交互进行打通========> 结果存储到Redis中 和HDFS 上面

Redis中存储的结果：
        id对应的Superid
        superid 对应的子ID
HDFS 上面的存储结果用于推送到UpdateSuperid服务中，用于更新GP中的Superid
**********************************************************************************************************************************************************
16:17 2021/6/18
1、回归测试Intel数据源接入模块功能
2、与克震学习并整理ETL抽取、SuperID抽取后台数据流程。
3、梳理记录任务监控子模块ETL抽取功能点
4、与晶姐确认试用期考核目标
5、学习麻辣烫社区必修课程：【1115峰会发布：新一代数据中台&营销智能平台】

下周计划：
1、梳理SuperID抽取功能点。熟悉系统其它模块。
2、根据产品原型和系统功能学习中间表抽取底层数据流程 
3、学习麻辣烫社区必修课程
4、完成领导、项目组交办的其他工作

心得：
1、整理功能点前从产品原型入手可以更快更准确的学习产品功能
2、熟悉模块后台数据流程可以帮助更好的理解产品功能

反思：
随着对测试工作的了解逐渐深入，之前梳理的功能点不够完善，需要逐步完善，目标产出一定程度上可供参考查阅的标准产品功能导图。

15:17 2021/6/21
单列ID 的意思是自己和自己打通，SuperID自己跟自己打通 ，为什么需要单列ID ，应用场景是什么。
什么是散列字段？选择散列之后什么效果。

****************************************************************************************************************************************************

中间表抽取，新建目标表，配置重命名字段，  命名重复，，这块印虎给的解释是，按照优先级抽取值到目标字段中。
会产生如下现象：
字段配置出有两个id
但是gp库生成的表 只有一个id字段
在做数据预览是会校验表结构是否一致，会卡住。   在验证下，有问题的 coding 提bug，附上请求参数

跟着高兴熟悉项目上的压力测试。
19:27 2021/6/22

11:36 2021/6/23
18:49 2021/6/23
测试所有数据接入的 增量选项。是否好用。

16:44 2021/6/24
数据表接入，若方式为手动，则后端传的任务里面 job_cycle=0 ,在大数据后端判定后会默认赋值为7， T+7的逻辑执行
16:17 2021/6/25



1、学习梳理SuperID抽取、中间表抽取、应用表抽取功能
2、与高兴学习压力测试工作模式，及压测关注点
3、回归测试数据表接入、API接入增量接入功能。
4、提交并验证学习过程中发现的BUG
下周计划：
1、系统梳理数据管理模块功能，熟悉数据管理模块后台数据流程，整理功能导图。
2、学习任务监控模块功能。
3、完成领导、项目组交办的其他工作

心得：
方向比速度更重要，找准方向可以事半功倍。

反思：
一些测试方面习惯还没有养成， 比如，清理验证BUG前浏览器缓存等，影响了工作效率。
11:51 2021/6/28


ETL抽取任务会生成receivetime字段 ，SuperID会追加SuperiID字段。
中间表跑之后 ，应该跑GPto HIVE ，需要跟晨宇确认




标签相关表格操作，改成页面需要如何操作 
流程是什么，


新增复杂标签时，直接入到dwm库（原入到dm库指标库）
进dwm表的都要进 id mapping  表


0628新需求：
应用表抽取
第一个加应用表类型：指标、复杂标签，单选点点的方式实现 ，选择后落入不同的库中
2、数据库
3、英文表名称
3、中文表名称

英文表名称和中文标名称在系统内的展现形式统一说法 表现：如下：
原英文表名称叫 目标表名称
原中文表名称叫 目标标注释

高兴记录新需求：
1、中间表新增任务需要同步cdp_id_type_mapping表
2、新增应用表时，勾选复杂标签，需要同步cdp_id_type_mapping表
3、中间表删除：blade_label，application_table_meta，cdp_id_type_mapping，blade_label_id_manage 关联查询
4、ID类型管理删除：blade_label，application_table_meta 检查
5、应用表增加逻辑：区分复杂标签和指标，复杂标签落到dwm,指标落到dm
6、应用表新增：1）应用表类型（指标表、复杂标签）
                        2）数据库（和应用表类型联动，不可手动选择）
                        3）目标表名称
                        4）目标表注释
7、同步所有功能(数据表接入，文件接入，API接入，中间表抽取)  目标表描述改为“目标表注释”



学习1115峰会发布： 智能运维、泛在感知、智慧零售解决方案，线上必修课程。
10:13 2021/6/29



20210629 
1:中间表新增行为表、属性表时任务设置页面新增data_time(原系统的数据生成或有效时间) ， 供标签计算时使用
测试用例需覆盖前端功能，计划后端数据验证工作。
注：应用中间表和字典表前端页面不显示，但是在后台的id_type_mapping 表要插入一条记录·


校验sql：
#删除中间表判断一方标签是否在使用
SELECT b.table_name,a.id,a.label_name FROM  blade_label a  join blade_rule b  on substring_index(a.rule_id,',',1) like b.id where  substring(b.table_name,5)='中间表名' and a.is_deleted='0' and b.is_deleted='0'

#删除中间表判断应用表抽取是否在使用 ---缺少主表 is_deleted=0
SELECT distinct b.id ,a.middle_table FROM application_table_index_rule a join application_table_index b on a.index_id=b.id where a.middle_table='中间表名称' and b.is_deleted='0'

#删除中间表判断个人画像模板配置是否在使用
SELECT *  FROM per_portrait_list_config where tb_name='中间表名称'
#判断转化路径是否在使用
SELECT *  FROM  per_portrait_path_config where rule like '%"tbName": "中间表名称"%'
#判断用户属性是否在使用
SELECT *  FROM  per_portrait_property_config where rule like '%"tbName": "中间表名称"%'

#删除中间表判断数据地图是否在使用
SELECT * FROM datamap_category_manager_table_list where  substring(table_name,5)='中间表名称' and is_deleted='0'
19:07 2021/6/30



心得：换位思考，测试工作很大一部分比重是把自己的想法加到产品或其他同事身上，有效沟通可以使别人更容易接受该想法，可以有效提高效率。
话术：
1、忙时非重大BUG提交前同事沟通：这个bug我已经整理完了，今天提对你有影响不？
2、这个功能设计的有问题 xxxxx   换成： 这块我不太理解，麻烦再给讲下，过程中逐步加入自己的想法
19:01 2021/7/1


中间表压测。。。。。。。。。。，数据准备工作找高兴确认（已有大文件、已有文件接入任务，需要确认数据已接入）
select count(ip) from cdp_ods_gxintel_adm3      16734528
select count(ip) from cdp_ods_gxintel_24adm    8367264	
select count(ip) from cdp_ods_gxintel_17adm    8367264
关联字段：post_referrer，
确认需接入数据表数据为千万级
创建中间表接入任务（多表接入任务）


INSERT INTO "dwd"."cdp_ods_hdw_0701adm8bw"("date_time", "ip", "post_page_url", "browser", "ref_domain", "ref_type", "post_referrer", "visit_start_page_url", "visit_start_time_gmt", "post_visid_high", "post_visid_low", "visit_num", "visit_page_num", "page_event", "exclude_hit", "os", "post_prop6", "dt") VALUES ('clk', '7xbvl0mmn7zC', 'cookie', '2244971', '7tcTU', NULL, '1624351228', 'W7', 'CR81', '125.109.125.171', 'W', 'wDev', NULL, '0', '7xbvl0mmn7zC', 'false', NULL, '2021-07-02');
INSERT INTO "dwd"."cdp_ods_hdw_0701adm8bw"("date_time", "ip", "post_page_url", "browser", "ref_domain", "ref_type", "post_referrer", "visit_start_page_url", "visit_start_time_gmt", "post_visid_high", "post_visid_low", "visit_num", "visit_page_num", "page_event", "exclude_hit", "os", "post_prop6", "dt") VALUES ('imp', '50582687706c09f6', 'device_oaid', '2241809', '7tExu', NULL, '1624357785', NULL, NULL, '123.58.118.92', 'A', NULL, NULL, '1', '7fdvl0Vt388C', 'false', '2021062218255401013516309118036155', '2021-07-02');


中间表抽取： 可多次提交创建同名任务

**********************************************************************************************************************************************************
***********************************************************************重要*******************************************************************************
**********************************************************************************************************************************************************
achiles 处深入优化：看到任务执行进度、实时状态方向。
文件接入：验证时去服务器看文件大小变化。需要找到服务器临时文件地址：发邮件找洋哥、华哥申请：写清楚哪台机器，什么模块的权限。
邮件：
后端日志查看权限。
大数据 yarn的查看权限、日志查看权限

目标表二次引用 非空校验，需要改造。需要实际存到库里面
**********************************************************************************************************************************************************
**********************************************************************************************************************************************************
**********************************************************************************************************************************************************


20:43 2021/7/2

10:03 2021/7/5

15:02 2021/7/5
同表名 自关联  



18:59 2021/7/6
梳理一方标签功能逻辑
中间表压测，发现了重复建任务的bug，GP数据库节点故障
一方标签测试：任务执行失败



模型管理、客情分析下的内容 

17:09 2021/7/7






19:19 2021/7/7


预测存储位置0707记录：
库名：user_repurchase
表名：user_repurchase_forecast
字段名：prediction_path

预测结果存储在上述表中
表里面prediction_path字段存储的是HDFS 上面对应的路径
9:55 2021/7/8
11:09 2021/7/8

11:08 2021/7/13

11:01 2021/7/14

ID正排表，存在hive里面idsort库id_sort表
记录所有的superid 对饮的标签id
标签里面是人的superid
1、人群是 划定标签集合  ：进而拿到一波superid ，
2、同过superid 查id正排表，得到标签集合，
3、然后再统计标签集合中各个标签内的Superid个数

需要ID正排表更新才可以保证 2 步中能匹配到标签集合。
ID正排表一般是定时更新，标准的现在没有更新，所以看不到数据。


人群画像详情内的标签集合，是从ID正排表查的，查出来的结果翻译成标签名，
18:50 2021/7/15

前端代码效率提升，公共组件抽取   ，  加载处需要加loading。
RFM模型 ？
10:35 2021/7/19




conf平台：可以记录项目文档，回头找同事问下平台入口和账号

ID类型管理流程、优化项：
列表页
1、表注释加宽两倍，下拉框保证可以有效展示十个汉字
2、统计按钮改名：查询
3、多选后点击新增 提示父记录只允许选择则一条，去掉此逻辑
4、批量删除ID类型 按钮 改为批量移除
5、操作列，删除改为移除
6、把ID类型列改为 是否选择，展示文字是/否 ， 列名加问号 ，提示文案：“选择是用于标签计算”
7、修改只允许修改字段类型、ID类型、是否选择（dwm表时），非dwm 库的表字段是否选择编辑时不允许选择是， 默认只能为否、置灰
8、中文库名、英文库名、英文表名称、中文表名称查询 ： 下拉框、和列名均统一修改
9、列名展示顺序：中文库名、中文表名称、英文表名称、字段名、字段注释、字段类型、是否选择
新增页：
1、中文库名、英文库名、英文表名称、中文表名称查询 ： 下拉框、和列名均统一修改
2、搜索： 中文库名、中文表名 下拉搜索框，选定后直接出发搜索操作  
3、操作列修改图标 改成 +号  提示语：添加。
4、是否选择dwm默认是，其余默认否 不可修改。
5、新增页列表展示速度优化 -》万鹏
6、列名展示顺序：中文库名、英文库名、中文表名称、英文表名称、字段名、字段注释、字段类型、ID类型、是否选择


14:05 2021/7/19

 
15:58 2021/7/19
ID类型逻辑梳理，需求确认 5H
coding bug验证 2H
GP压测数据修正 1H   有问题：表删不掉

任务监控模块重构测试  8H   目前已发现bug绝大多数均验证并关闭了，新问题是：个别模块存在切表不完整的情况，仍在往旧表插数据，另外任务执行日志表缺失0707 之后的日志数据
加载动画优化缺陷查找、提交
16:19 2021/7/20


19:30 2021/7/20
RFM 模型的设计
https://conf.mlamp.cn/pages/viewpage.action?pageId=74727906

//326887  ods idsort id_sort 表数据量0721 记录
参加年中总结会议
系统bug验证、可优化缺陷提交
id正排表数据验证，新增标签计算成功后，启动id正排表计算，计算后id_sort表无变化

客情分析、人群、标签现在都看不到，前后端问题改完后清库验证， 目前系统内存在大量脏数据


压力测试报告编写： 找晶姐取经
19:31 2021/7/21
中间表抽取-任务执行后、执行状态不变，需要刷新才会变成执行中
重跑中间表抽取2亿条压测任务（排除gp表lock问题）
15:23 2021/7/23


api接入 ： 任务不入status 表 
10:15 2021/7/26
//应用表运行任务接口
http://192.168.5.72:8080/start-application?id=2

19:28 2021/7/27
梳理加密这块的逻辑 登录MD5加密、其余AES加密，洋哥确认偏移量是什么
前端做什么、后端做什么、数据如何流转
19:30 2021/7/27

10:05 2021/7/28
加密逻辑梳理：
1、新建用户账号：
新建用户目前密码这块的逻辑是，生成16位随机字符，然后加上偏移字符，并使用AES123+BASE64 算法进行加密后存储，逻辑和加密算法不变，需要重新定偏移字符--洋哥
2、系统内各类登录密码处理
系统登录、文件接入、人群导出、数据源驱动配置等四处 登录时前端均需要使用与后端一致的偏移字符和加密算法对用户输入的密码进行处理后调用登录接口，后端拿到密文密码后，首先使用用户名获取用户，然后比对密文密码和库里面的密码是否一致，一致则生成并返回token
3、密码修改
后端返回加密后的字符串，前端解密后以***的形式展示在密码框内，并进行后台记录，用户修改密码后与原纪录比对校验，如输入一致则提醒新密码不允许原密码一致，校验通过后对新密码进行加密，调用保存接口提交到后端入库。
4、后端入库和使用
后端在使用密码时，从前端获取到的和从数据库取到的均是加密字符串，因此在实际使用密码进行连接时，需要先对加密字符串进行解密，然后使用解密后的明文密码进行连接操作 。

如数据源驱动，现系统逻辑为后端拿到前端给的明文密码后，直接使用明文密码进行连接测试，连接成功后则入库密码。在本次改动后，应达到前端先对明文密码a进行偏移、加密处理，然后传给后端，后端拿到密文密码A后 进行解密，解密后的明文密码仍为a，后端使用a进行连接测试，测试通过后入库A，后续使用此数据源驱动时，均需要先解密A，再进行连接。



文件任务未触发：  已修改可触发  ，触发失败。
 http://192.168.5.72/api/datasource/file/sysjob/run-job/3
数据表任务触发执行成功，但是任务状态没有回填，列表和任务监控
http://192.168.5.72/api/datasource/job_db/run-task?id=27
API接入 点击运行后，页面提示运行成功，实际 数据接入失败、运行失败
http://192.168.5.72/api/api_manage/api_run/3
ETL任务未触发Achilles任务
http://192.168.5.72/api/data-manager/etl_job_meta/function?jobId=91040486
SUperID任务未触发、直接提示任务失败  POST接口
 http://192.168.5.72/api/superid-job-list/superid-running-work
{"param":{"shellpath":"/etl/file/script/8ee5f00a-060c-4077-9429-1a93092f952d/run-superid.sh","jarpath":"/etl/file/script/35d2d747-aafa-44b8-bc51-3993f0791371/HiveJsonExtractToFile-1.0.jar","topic":"cemsuperid_v1","dbname":"ods","tbname":"cdp_ods_hdw_0726qbsftptest","jobId":5,"state":1}}





rfm模型 
只能选dwm 表
剔除时间不能选 数据时间段之外的数据
新增后 即变成等待中 准备row data数据，
模型数据准备失败只能删掉，重建 不能二次使用

配置：
平均值：选择后的展示优化,回显至平均值框里面
绝对值：要不要做输入限制   
自定义：修改高中低 为对应的  高频、中频、低频等具有实际意义的文字
	数据取值区间 改成半开区间   <R<=


RFM 模型训练结果 同步dwm 模型结果宽表 、 
系统初始化脚本要加这个表、初始化ID类型管理（待定）、
模型被引用后可以删除吗？（模型与模型对应的数据做依赖，如果被一方标签引用就不孕系删除，没被引用时删除模型时同步删除模型对应的数据）
自动生成字典
15:02 2021/7/28

16:53 2021/7/28

18:40 2021/7/28

与高兴一起梳理密码加密改造，流程  2H
任务监控模块测试		         6H   
RFM模型

无日志：
MQ重启方法，洋哥提供。


编写标签计算压力测试报告	2H
任务监控剩余问题跟踪测试	6H	


16:35 2021/7/29
**************************************************工作分界线***************************************************************
任务列表；
1、全局数据处理压测任务：见桌面压测计划 ---未开始，任务监控完毕后，有时间即开始进行
2、加密改造验证--开发中
3、RFM跟进--高兴跟进中，需要学习业务逻辑等
4、任务监控收尾-------进行中
5、新人活动 ---20210730 周五下午3:00--5:00  ---需求评审后参加
6、新员工入职培训--20210803 周二上午 
7、linux命令复习，为后续部署工作做准备
11:17 2021/7/30
与克震确认压测任务统一执行资源配置标准---1H
整理线上CDP标准系统压测记录模板---2H
coding  人群导出sftp、数据源驱动加密改造验证 ---3H
REF用例评审、后端评审--2H


1、第一张表少个数据时间字段、 各种状态0123 全局要不要统一数据状态、训练状态。
2、  
 自定义规则 存储、使用
18:53 2021/7/30


9:36 2021/8/2
数据源驱动密码加密回显优化调查记录                          1H 
系统加密改造功能验证 	2H	数据表HivetoGP接入任务执行失败bug定位
1、系统登录--已验证
2、文件接入 --文件预览处前端尚未做加密处理
3、人群导出--已验证
4、数据原驱动配置--已验证
文件接入、ETL、中间表任务入库验证、压测已配置项确认	4H




19:00 2021/8/2
CDP标准系统--文件接入服务器密码、数据表目标库密码 加密传输至大数据处理，大数据解密后再使用
SuperID并发 ？ 什么逻辑/场景
16:16 2021/8/3



文件接入文件上传HDFS服务器密码传大数据端需要加密、任务监控日志内不应体现明文密码--后端和大数据端需要同步操作，不然影响文件接入功能
文件接入数据预览 前端未做加密
任务监控--日志查看  没有按照taskid 区分，日志混淆

标准环境资源配置情况：
文件接入 ：资源不够，申请不到
38万Kb的文件 解压后1.2G（10w数据）  按照14G*7core的资源配置无法执行。
注：driver-memory 4G + （num-executors 3 * executor-memory 3G ）+1G(AppMaster) = 14G			

16:39 2021/8/3

11:36 2021/8/4
与克震商定压测资源配置
提数据源管理bug（3531-3534）
17:13 2021/8/5

文件接入亿条数据压测		文件上传hdfs中断
文件接入加密功能验证		
数据源驱动加密功能改造复测                   
10:37 2021/8/6

coding bug验证
文件接入数据丢失问题跟进



标签删除--id_正排表删除  --克震做
定时任务管理新增生成随机时间段跟进 --万鹏、苏颖
11:20 2021/8/9


文件接入两亿条数据压测、文件接入压测报告完结		黄大卫		4H
发现并提交文件接入bug（3539、3541）			黄大卫		2H
与克震学习etl、superid、gptohive压测常用命令		黄大卫		1H
尝试在KS01服务器上安装mysql		黄大卫			1H
19:08 2021/8/9


在KS02服务器安装mysql  2H			克震协助
文件接入bug验证  1H
定时任务需求数量，编写前端测试用例		4H
API大数据接口压测	1H


14:51 2021/8/10

18:36 2021/8/10
API大数据接口压测 		3H
API接入任务执行时间问题调查、bug提交	 	1H
整理CDP标准环境各类服务启动、日志查看在线文档    1H
定时任务后端用例梳理、字典表初始化定时任务分类		3H    70%
15:52 2021/8/11


9:32 2021/8/12
编写不同分类任务新增时cron表达式校验后端用例	4H
研发中心-数据库驱动bug提交（3553、3573） 2H
文件接入俩bug验证、关闭	2H


cron表达式生成类，设定场景 进行测试。
9:31 2021/8/13
模拟cron表达式生成场景，测试cron表达式生产算法		4H
提bug 3579 ，验证并关闭coding上bug，3527 		2H
大数据常用命令实操验证，ETL、Superid跨日期执行脚本学习	 1H
更新定时任务测试用例				1H


申请conf权限

跟晶姐学习了解压力测试标准： 
中间表大小表标准：  400W 50 这种  ---已完成
9:38 2021/8/16


宝马反馈中间表压测大小表问题技术调查解答。		3H
achillesETL bug复现提交		2H		
codingbug 沟通优先级调整		1H
intel代码同步问题整理	2H


14:34 2021/8/16

17:27 2021/8/16
数据表接入大数据解密验证	
数据表接入hivetomysql 压测

20:17 2021/8/16
intel密码加密方式 与标准的加密不一样
15:37 2021/8/17


数据表接入、文件接入大数据解密bug验证、关闭。	黄大卫	1H
数据表接入hivetomysql 压测	黄大卫	5H		mysql造数、写入性能比较差
intel代码同步加密改造部分支持	黄大卫	1H
coding bug提交（3585、3586、3588）	黄大卫	1H


     6）500问题，统一修改后台逻辑 把500状态码改为其他状态码，统一梳理下 #万鹏 #大卫
指系统中异常未捕捉项，重复触发导致页面出现 服务崩溃图样（找万鹏解决根源）

     7）压测报告整理到conf #大卫
暂无conf操作权限

数据表接入hivetogp、gptohive、mysqltohive 千万级数据压测）	黄大卫	5H
数据表接入压测报告模板整理		黄大卫	1H
系统崩溃问题调查，codingBug提交（3593）		黄大卫	2H



1705 2021/8/18
字典表改造逻辑梳理			4H
数据表接入 mysql 千万级	。	3H	
gptohive 千万级数据接入失败问题调查		1H	

定时任务 原型：开始时间-结束时间
一方标签、人群画像、人群计算  只有有效期  （不含开始时间）
人群导出、应用表 	有效期（开始-结束）

16:40 2021/8/20
数据表接入 mysqltohive 千万级数据压测 
试用期中期目标沟通
10:35 2021/8/23

mysql千万级数据构造、压测。
HiveToGP 6千万数据压测（落库数据大小首次39G、二次11G）
GPToHive 6千万数据压测 失败（原因仍是excutor 超时）
api执行时间、数据库
提bug #3597 #3599


与高兴一块定下 coding bug简易程度，
新的bug管理方式：
紧急：高优先级
高中低 对应=简单、普通、复杂

9:59 2021/8/24
codingbug优先权按难易程度调整	1H
hivetogp2亿条数据压测		3H
bug验证、提bug  3601、3604	2H
API数据节点字段提示语及使用逻辑梳理	2H
定时任务改造初版要不要做  定时任务与原任务的可用性等改造。，晚会确认。

截图并使用文字等方式标记，在在线文档上划出字典功能改造原型简图给华哥。



9:44 2021/8/25
 数据库驱动 、登陆页高频刷新异常、任务监控bug验证 3H
目标表记录表问题朔源梳理	2H
字典表改造功能	2H
ETL、Superid任务配置、试运行 1H

前端搜索框回车查询调用接口两次bug沟通验证、数据库驱动地址校验功能完善 3H
ETL任务百万级数据压测	生成json文件、数据未落库 -1H
试用期、绩效目标沟通	2H
api服务问题排查，重新部署	1H
coding bug提交#3623 #3624 1H

10:30 2021/8/27
rfm模型回调失败问题协助调查	1H
ETLkafka-flink流程学习，ETl压测任务未落库原因调查	3H
全年绩效目标填写	           1H
codingbug验证#3533、#3624 		2H	均未通过
#3588目标表新逻辑数量		1H	

文件接入、建目标表 异常被捕捉，提示系统异常联系管理员

kafka 任务查看：
flink 消费结果查看：


1、顶级业务字典，非管理员不可新增
2、字典编号code ， 涉及到后端代码引用的，非管理员不可修改
3、现存问题：修改后刷新页面，不展示修改前的字典树。
11:13 2021/8/30



coding bug验证#3456#3624#3533，提bug#3641		3H
conf上传已完结初版压测报告 		1H
api服务异常停止协助调查		1H
gptohive 压测任务失败原因调查	2H
rfm模型用例学习，			1H
10:35 2021/8/31


大数据压测问题汇总：
	mysqltohive
		6千万级数据压测：excutor超时
	hivetoGP
		2.3亿数据压测：任务成功，数据落库不全；任务失败数据部分落库。
	gptohive
		6千万数据压测：excutor超时
		
预期目标：
	1、对于非资源不足问题导致任务执行失败问题，需要确认失败原因，记录并修正后重新压测。
	2、对于因资源不足导致任务失败问题，申请资源重新压测。
	3、尽可能找到同等资源情况下不同类型的数据表接入任务，会导致性能差异的原因并记录。
		、mysql读取数据：缓冲区内存不足导致数据读取失败：需要提高缓冲区内存容量或清理暂存区。
		、

数据表接入压测问题汇总			2H
数据表新建目标表改造需求梳理沟通。		1H	
rfm模型测试，提bug#3646		 	3H
bug验证#3456 api服务异常关闭问题跟进		 2H

*********
找颖姐聊数据表新增目标表逻辑。





18:27 2021/9/1
编写奥迪排期日历、日历详情后端用例		4H
奥迪排期改造需求沟通理解		1H
奥迪cpc、cpm指标bug提交（#194~197）,提文件管理问题工单		2H
异常流量分析原型需求文档学习。		1H
9:39 2021/9/8

标准codingbug验证 #3677 #3247 #3588 #3579 #3433 #3678 提bug #3678-3680 		4H
奥迪异常流量逻辑需求沟通会 	2H
奥迪项目测试 提bug #198  验bug #197	2H

18:09 2021/9/8

9:46 2021/9/9
标准bug 验证#3531 #3679数据表、API任务异常运行 提bug #3686
	2H
奥都排期管理测试 提bug（#200-204）	3H
老百姓大药房压测前期准备工作 	3H

数据表接入新增目标表 二次选择时 需要测下其他类型的数据库





文件上传、下载改造：

1、detail表 和 外部表的同步 依据是什么  
2、外部表有效的点击曝光和drl信息  如何定义有效  spot_plan_id  version
上午沟通结果:  逻辑未完全确定，下午再碰


异常流量分析（国庆前上线）：
	

BDH --ROI 需求纪要：
现有资源：
	秒针接口文档
	西尚云业务需求
	
首次和华哥沟通关键点记录：
	任务提交-》任务状态监控（定时任务管理）-》数据获取-》圈选n*m人群-》提交任务-》拿到数据
	圈选注意事项：人群属性应为可穷举人群，不应包含日期等无法穷举人群，会导致最终的n*m人群无法计算

期望输出结果:
	功能整体业务流程图，包含数据收集、过程监控、数据聚合、人机交互等，注意考虑业务细节。


老百姓大药房远程环境调试及使用	2H
奥迪ROI定时任务流程协助梳理		4H
奥迪一期需求优化后端改造逻辑梳理	2H

9:53 2021/9/13
中间表抽取来回切换页面后  数据预览无法通过-----------问题记录

标准	验bug #3686  #3676 #3314 提bug#3694 #3695 #3496 #3697	黄大卫	2H
奥迪	奥迪排期管理后端用例更新。	黄大卫	2H
奥迪	奥迪排期管理改造测试，提bug（#219-225），排期管理需求梳理确认	黄大卫		4H


奥迪排期管理改造测试
标准bug 验证 #3696 #3697 #3694	



下载文件名 展示为时间戳形式。



20:53 2021/9/15
测试环境留资数  上传失败
18:45 2021/9/17


按照最新逻辑 补充奥迪后端测试用例
9:57 2021/9/18
更新老百姓测试脚本为使用外部csv文件格式（批量执行人群计算、导出任务）
找出任务执行时长库表 及对应字段
18:24 2021/9/23


增量更新思考：
		目前增量更新为按照天为增量单位，在使用时存在问题如下：
	某天任务执行失败后，如果对数据不敏感，感知不到
	补数困难，先查后补
	灵活性差，只能按天补数
	
是否可以改成按照动态时间更新：
	每次更新取上次更新时间到当前时间段数据，
	更新成功后上次更新时间为当前时间
	更新失败后记录上次更新时间不变
	
	补充阈值：执行失败超过3天后更新上次更新时间至当前时间，重新开始同步数据 。保存执行失败时间段，及失败原因至失败记录表
供后续补数查询使用。



梳理记录异常流量分析业务逻辑、频次分析业务逻辑 		
完善排期文件上传内容校验规则
老百姓性能测试任务跟进		宽表数据丢失、GP指标未配置


编写频次分析前端用例，	3H
测试正则配置功能 提bug #3736		3H
学习梳理频次分析后端逻辑、数据抽取逻辑。	2H
	
15:43 2021/10/8
找洋哥确认频次分析数据准备过程如何校验，（频次分析展示结果的表mz_admonitor_frequency_analyse怎么确定是正确的）
权限如何划分。  ------- 不划分权限，只要可以看到此模块即可看到所有项目、车系
15:45 2021/10/8

18:28 2021/10/8
频次分析后端用例
14:15 2021/10/9


最新数据日期取值：问下洋



编写频次分析后端测试用例	
老百姓项目5000W人群导出任务性能测试
9:49 2021/10/11


梳理cdp标品压测现状、提bug#3767、#3768				数据表接入、ETL任务。by博文：数据表接入功能未切换至sqoop，仍为spark方式执行，切换至sqoop时单mapper执行1.3亿数据用时约50分钟，多mapper时需要int型字段做切片，若无则需要使用rownumber 多次分页查询，对于大数据量表性能相对单mapper反而下降，故未切换至sqoop，后续会尝试使用datax执行，目前数据表接入存在问题仍存在：大数据量时excutor超时

测稳定版正则表达式功能、ETL、SuperID			
19:07 2021/10/11

19:11 2021/10/11



api接入数据预览。
superiid 配置选择数据表时不便捷。
*********************************************************************
梳理cdp标品压测现状、提bug#3767、#3768
测稳定版正则表达式功能、ETL、SuperID
频次分析双向宣讲，需求确认会议



更新频次分析测试用例
参加老百姓性能测试汇报沟通会议
根据客户要求补充各场景峰值集群资源占用截图
测试ETL、superid引用正则功能,#3774

18:04 2021/10/12
消费者属性、标签接口性能测试	3H
服务部署、RFM模型回调、ETL数据不落库问题跟进	2H
奥迪kpi、ROI 转化宣讲 		3H
17:42 2021/10/13



老百姓接口性能压测			黄大卫		3.5H
排期预警规则配置需求会议		黄大卫		1.5H
编写规则配置前后端测试用例		黄大卫		3H



17:24 2021/10/14

10:38 2021/10/15
测API、字典管理 验 #3767、3971、3792  提#3789~3792
编写规则配置后端测试用例
老百姓接口性能压测，更新并交付测试报告
18:22 2021/10/15
**************************************************************************************************
superiid 配置选择数据表时不便捷 没有表查询等，只能用眼看。
14:16 2021/10/18


17:52 2021/10/20

数据管理：
superid 配置表
中间表抽取 选源表 ：目标表
应用表抽取选择表

数据源管理：
文件接入选择目标表
api接入选择目标表
模型管理：
个人画像模板 选择画像表


数据表选择期望达到效果： 一方标签选择表时 可以模糊匹配表名，体现出表中文注释和英文表名（展示形式参考rfm模型） 


fila 鞋   给媳妇看
怀孕踢肚皮提不动
18:31 2021/10/20



确认并完善预警规则配置后端测试用例		
参加老百姓性能测试结果评审会
测试频次分析大数据部分


17:10 2021/10/19
测试频次分析功能	
排查验证频次分析大数据数据差异问题


更新规则配置改造 用例--预警邮件
验证频次分析bug
编写邮件预警页面测试用例


人群包应用列表功能确认点：
1、数据供哪里使用，是否有业务上的关联关系
2、新增页中存在 项目ID、媒体等奥迪项目常见维度，此数据任意填写吗，是否有限制规则，如果不是从哪里取数。
3、数据填写限制： 字符型：50长度、数字：正数、两位小数，DID数量：正整数 
4、


11:18 2021/10/22
学习ROI分析BRD、确认频次分析建议控频次数取值逻辑	3H
编写人群包应用列表前端用例	3H
15:42 2021/10/22

*******************************************************************************************************************************
频次分析：造数据验证 建议控频次数逻辑
BDH文档补全
17:58 2021/10/25




频次分析回归测试，bug验证
更新BDH文档
9:31 2021/10/26

15:20 2021/10/26
更新BDH文档			
奥迪项目进度沟通、人群包应用需求确认	
频次分析回归测试			
标准数据源管理模块回归测试		



不在秒针数据里面的项目名称  随机生成项目id时 会导致无法触发唯一性校验
随机ID生成可能会产生随机数碰撞问题。

梳理标准中间表数据融合逻辑。
KPI规则邮件预警造数据，邮件发送测试：
KPI预警邮件合并发送问题梳理确认。
10:43 2021/10/27	


预警邮件type=6 数据不对。
10:51 2021/10/28


测试邮件预警列表、KPI预警规则配置功能	7
参加k8s分享会	1H

邮件预警列表展示顺序、by send_time desc---待确认



KPI规则配置JSON串：CPUV。CPCV（有变化，上线需注意）
11:12 2021/11/1


type=2 多条数据内容排序造数验证

测失败邮件重发逻辑、 三次、都失败后发给管理员。
周六发留资---时间、花费进度差预警。

验证完毕后上测试环境。
10:00 2021/11/2

测试邮件预警遗留问题
编写人群包列表、定向资源优化前后端用例。
列表416报错问题排查。 ---邮件预警列表、排期列表、异常流量、频次分析均有此问题。

11:25 2021/11/3
验证416问题、邮件预警列表、排期列表、异常流量、频次分析		1H
编写ROI分析前端用例，梳理后端用例逻辑。			3H
协助业务验收预警邮件功能，回归测试环境邮件预警功能。		4H


线上预警邮件造数、回归测试，准备定时任务数据。
更新人群包应用列表、定向资源优化前后端用例。


with t as (	
select case when CHAR_LENGTH(trim( aspd .campaign_id::varchar))=7 then aspd.campaign_id::varchar else aspd .spot_plan_id::varchar end as campaignID ,* from audi_spot_plan_detail aspd  inner join audi_spot_plan asp  on aspd .spot_plan_id =asp.id  )
select * from t


18:31 2021/11/4

14:34 2021/11/5

11:19 2021/11/8
验证并关闭邮件预警功能缺陷，清理线上测试数据	2H
根据最新设计文档更新ROI分析后端用例		5H
排查数据丢失问题				1H

18:22 2021/11/8

15:52 2021/11/9
测试人群包应用列表功能			6H
排查业务反馈11月04数据对不上问题，并给出风险提示	2H				
18:33 2021/11/10


找西尚云对曝光、点击、金额的时间取值范围。
11:29 2021/11/11


验证人群包应用bug
梳理确认ROI时间取值、后端计算基准逻辑
更新ROI后端用例、编写转化漏斗品牌转化漏斗对比后端用例

17:12 2021/11/12



***************邮件预警列表***********************************************************************
campaign——id 为0时，落alarm——record 表时需要落库 spot——plan——id
18:11 2021/11/12


压测材料梳理

11:27 2021/11/15


编写生命周期转化漏斗-自定义转化漏斗、自定义画像后端用例
ROI分析项目  优先取秒针 项目名后的 项目结束时间取值问题确认（自定义的为空）



测试ROI分析、营销效果概览
ROI、人群包、邮件预警、营销效果概览等需求沟通确认

**************:ROI分析，项目维度 人群包数据添加问号提示语（提示是全项目数据，非某天数据）


#668

17:20 2021/11/18
验证coding bug 、更新ROI分析 车系维度后端用例	
16:31 2021/11/19

验证codingBUG，更新排期管理改造前后端用例。
18:31 2021/11/19



与高兴整理奥迪线上功能清单、逐一验证。

10:09 2021/11/22

整理奥迪功能及进度清单		1H
回归人群包应用、定向资源优化。		5H
更新奥迪BDH产品手册		2H

18:48 2021/11/23
项目、媒体、车系、媒体类型 排序都要做，统一规则。  roi，生命周期漏斗转换，异常流量分析 的下拉菜单要不要都排序。

15:05 2021/11/30

验证coding bug ，回归上线功能模块。
整理上线测试注意事项
验证DID数量动态获取


一排期多 campaign ：
	1、排期表、需要与campaign解耦，本次上线功能不兼容新需求，需再次改造
	2、各类分析页面需要确认group by 的维度是不是使用的spot_plan_id(与原功能保持一致)
	3、人群包、定向资源优化等项目选择处改造--
	4、-ROI排期维度查数 原来用campaignid 查询的
	5、营销概览项目总数 只能以排期计数无法区分campaign
	6、需要保证reports表同步数据至detail 表不使用campaignid也可以精确同步数据（或排期文件再把campaignid加上，同时修正校验规则）
		


线上数据同步、脚本执行后验证脚本执行结果
回归ROI分析



18:30 2021/12/1
点点人保：
多少数据源、数据接入情况，  
搞个在线文档 记录各模块功能可用情况、数据接入情况-----作为验收报告，需注意格式条理

需要了解：需要接入哪些数据 达到什么样的结果,



整理奥迪下次上线功能清单
人保运维文档学习
11:19 2021/12/6


生命周期转化漏斗测试
碰、角色菜单栏导航需求，梳理时间边界值问题。
18:07 2021/12/6


验证coding bug
人保数据接入功能验证，文档整理。
11:23 2021/12/8

过奥迪排期计划，梳理奥迪改造需求，更新转化漏斗后端用例。
人保数据接入、ID绑定功能走通。



9:43 2021/12/9
验证coding bug，测试转化漏斗，导出文件等。
***********************************************************************************************************************
导出文件名剩余问题：
1、排期批量导出数据验证
2、详情导出 文件前两行格式与源文件不一致----待洋哥确认
3、生命周期转化漏斗 自定义画像下载失败



邮件接受问题解决办法：
1、补充邮件补发逻辑，当邮件因为邮件服务器并发数导致邮件失败时，把该条失败邮件记录计入数据库。
2、每小时检查当天发送失败邮件记录，重发失败邮件

当前进度：
测试环境已调整，待部署正式环境后，通过业务验证线上对真实并发的支持情况。

验证方法：
1、业务：功能上线后，根据具体排期收件人配置，问询邮件接收情况（注意接收邮件时间），
2、测试：如存在部分人员仍未接收到邮件，查询邮件发送记录表：失败邮件重发次数，失败原因等信息具体判断重发情况是否正常。




10:04 2021/12/13
整理人保功能当前进度验证文档--（账户失效，暂停--验证至属性宽表计算结果字段未落库。）
测试邮件发送最新发送逻辑功能、人群画像下拉框改造及其他bug

转化漏斗--人群画像下拉框空值处理逻辑，待确认---by洋哥
15:04 2021/12/13

16:07 2021/12/15
人保功能验证-标签管理、用户分群。
线上回归本次上线内容，权限验证

17:55 2021/12/15

18:32 2021/12/15
出一篇log4j 安全漏洞解决办法csdn
16:49 2021/12/16

人保人群导出、用户画像功能验证
协助部署标准服务
15:56 2021/12/17

17:10 2021/12/17

15:46 2021/12/20
人保数据资产概览页面功能验证 30%（无数据）
9:33 2021/12/22

整理奥迪项目待优化功能清单。


线上转化漏斗-自定义画像：
1：响应时间长、需要loading或其他方式提升体验
2、曝光、点击、留资指标 可以任意选择 （有可能会选到不存在的人群）导致出图无法对齐
3、仅选择单个画像时 画像名称未居中展示
4、删除、添加画像时，生成画像按钮没有根据状态置灰或可用

其他：
1、查询忽略大小写：项目名称（人群包、邮件列表、定向资源优化）、人群包名称
2、排期详情导出文件与源文件不一致，缺少合并标题行。
3、异常流量默认时间取值范围优化	
4、历史被监测排期名称刷新？
14:43 2021/12/23



1、甘特图查看 权限无效---猜测对应原来的甘特图查看截图按钮权限
2、甘特图编辑 权限对编辑入口不生效
3、排期列表中的编辑 印象甘特图页面权限，不配置时进入甘特图提示无权限。
18:22 2021/12/23
、

准备分享标准测试流程。
9:33 2021/12/24

18:34 2021/12/27

验证奥迪项目升级功能
升级个人电脑版本
11:23 2021/12/29

18:22 2022/1/4

18:07 2022/1/6


排期改造注意事项：
仅以spot_str 归属表判断源，（端口port字段无效） 是否合理
入库时校验保存源类型。作为最后同步数据的依据。

与业务确认。 通投概念等确认基准、	以秒针为基准外挂tv的方式是否符合预期。

是否可能存在一个排期 多个秒针活动的场景、误操作可能会有
是否可能存在仅tv活动的排期，		可能	


手工校验下， ott 和 ad 的点位id 是否有重复的
18:09 2022/1/6
